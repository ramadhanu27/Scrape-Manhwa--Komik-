import ShinigamiScraperCard from './shinigami-scraper-card.js';

async function main() {
  console.log('='.repeat(60));
  console.log('TEST SCRAPER - HTML LENGKAP DARI USER');
  console.log('='.repeat(60));

  const scraper = new ShinigamiScraperCard();

  // HTML LENGKAP dari user
  const fullHTML = `<div class="grid mb-24 xl:grid-cols-6 lg:grid-cols-4 grid-cols-3 gap-4"><a class="relative rounded-8 block " href="/series/02d63ee2-df25-4b49-8893-ae8146b1c923/"> <div class="p-6 rounded-8 relative overflow-hidden "> <div class="bg-base-card absolute top-0 left-0 w-full h-full"></div>   <div class=" relative z-10 flex flex-col text-center items-center"> <div class="z-10 absolute -top-4 -left-4 flex items-center gap-4 sm:gap-4"><div class="flex items-center gap-0 rounded-8 overflow-hidden"><div class="bg-primary-400 w-18 h-18 flex items-center justify-center"><svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-12"><path d="M8.20551 0.410156C12.6384 0.410156 16.2318 4.00354 16.2318 8.43647C16.2318 12.8694 12.6384 16.4628 8.20551 16.4628C3.77258 16.4628 0.179199 12.8694 0.179199 8.43647C0.179199 4.00354 3.77258 0.410156 8.20551 0.410156ZM8.20551 3.62068C7.99264 3.62068 7.78849 3.70525 7.63797 3.85577C7.48745 4.00629 7.40288 4.21044 7.40288 4.42331V8.43647C7.40293 8.64933 7.48752 8.85344 7.63805 9.00393L10.0459 11.4118C10.1973 11.558 10.4001 11.6389 10.6105 11.6371C10.821 11.6353 11.0223 11.5509 11.1711 11.4021C11.3199 11.2532 11.4043 11.0519 11.4061 10.8415C11.408 10.631 11.3271 10.4283 11.1809 10.2769L9.00815 8.10418V4.42331C9.00815 4.21044 8.92358 4.00629 8.77306 3.85577C8.62254 3.70525 8.41839 3.62068 8.20551 3.62068Z" fill="white"></path></svg></div> <div class="flex items-center justify-center bg-base-white pl-4 pr-6 h-18 text-10 text-base-dark font-medium">3h</div></div>  <button class="bg-danger-500 px-4 h-18 text-10 text-base-white rounded-4 font-normal"><div class="md:block hidden">UP</div> <div class="md:hidden block">U</div></button></div> <div class="z-10 absolute -top-4 -right-4 flex items-center gap-8"><svg class="h-18 w-max" width="45" height="32" viewBox="0 0 45 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.4" y="0.4" width="44.2" height="31.2" rx="2.8" fill="white" stroke="#F5F5F5" stroke-width="0.8"></rect><mask id="mask0_2108_624" maskUnits="userSpaceOnUse" x="0" y="0" width="45" height="32" style="mask-type: luminance;"><rect x="0.4" y="0.4" width="44.2" height="31.2" rx="2.8" fill="white" stroke="white" stroke-width="0.8"></rect></mask><g mask="url(#mask0_2108_624)"><path fill-rule="evenodd" clip-rule="evenodd" d="M22.4999 25.6C27.8255 25.6 32.1428 21.3019 32.1428 16C32.1428 10.6981 27.8255 6.40001 22.4999 6.40001C17.1743 6.40001 12.8571 10.6981 12.8571 16C12.8571 21.3019 17.1743 25.6 22.4999 25.6Z" fill="url(#paint0_linear_2108_624)"></path></g><defs><linearGradient id="paint0_linear_2108_624" x1="12.8571" y1="6.40001" x2="12.8571" y2="25.6" gradientUnits="userSpaceOnUse"><stop stop-color="#D81441"></stop><stop offset="1" stop-color="#BB0831"></stop></linearGradient></defs></svg></div> <img class="w-full mb-16 aspect-[130/200] object-cover rounded-8" src="https://storage.shngm.id/thumbnail/cover/c8a6676ff239.jpeg" alt="The Strongest Assassin Gets Transferred to Another World With His Whole Class" style="">  <div class="flex flex-col text-center items-center h-68"><div class="mb-16 flex flex-col justify-end h-32"><h4 class="text-base-white md:text-14 text-12 leading-16 line-clamp-2">The Strongest Assassin Gets Transferred to Another World With His Whole Class</h4></div> <div class="flex items-center gap-4"><div class="bg-base-white/25 rounded-6 py-2 px-4 text-base-white text-10 font-semibold items-center gap-2 flex"><svg class="min-w-13 min-h-12" width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.1429 1.5C8.8389 1.5 11.0819 3.44 11.5524 6C11.0824 8.56 8.8389 10.5 6.1429 10.5C3.4469 10.5 1.2039 8.56 0.733398 6C1.2034 3.44 3.4469 1.5 6.1429 1.5ZM6.1429 9.5C7.16263 9.49978 8.15209 9.15341 8.94933 8.51758C9.74656 7.88176 10.3044 6.99414 10.5314 6C10.3035 5.00665 9.74537 4.12 8.94821 3.48501C8.15105 2.85002 7.16205 2.50426 6.1429 2.50426C5.12375 2.50426 4.13474 2.85002 3.33759 3.48501C2.54043 4.12 1.98228 5.00665 1.7544 6C1.98145 6.99414 2.53924 7.88176 3.33647 8.51758C4.13371 9.15341 5.12316 9.49978 6.1429 9.5ZM6.1429 8.25C5.54616 8.25 4.97387 8.01295 4.55191 7.59099C4.12995 7.16903 3.8929 6.59674 3.8929 6C3.8929 5.40326 4.12995 4.83097 4.55191 4.40901C4.97387 3.98705 5.54616 3.75 6.1429 3.75C6.73964 3.75 7.31193 3.98705 7.73389 4.40901C8.15585 4.83097 8.3929 5.40326 8.3929 6C8.3929 6.59674 8.15585 7.16903 7.73389 7.59099C7.31193 8.01295 6.73964 8.25 6.1429 8.25ZM6.1429 7.25C6.47442 7.25 6.79236 7.1183 7.02678 6.88388C7.2612 6.64946 7.3929 6.33152 7.3929 6C7.3929 5.66848 7.2612 5.35054 7.02678 5.11612C6.79236 4.8817 6.47442 4.75 6.1429 4.75C5.81138 4.75 5.49344 4.8817 5.25902 5.11612C5.02459 5.35054 4.8929 5.66848 4.8929 6C4.8929 6.33152 5.02459 6.64946 5.25902 6.88388C5.49344 7.1183 5.81138 7.25 6.1429 7.25Z" fill="white"></path></svg> 676.5k</div> <div class="bg-base-white/25 rounded-6 py-2 px-4 text-base-white text-10 font-semibold">CH.96</div></div></div></div></div></a> <a class="relative rounded-8 block " href="/series/dfb50275-6f88-449f-9153-2cd39a545437/"> <div class="p-6 rounded-8 relative overflow-hidden "> <div class="bg-base-card absolute top-0 left-0 w-full h-full"></div>   <div class=" relative z-10 flex flex-col text-center items-center"> <div class="z-10 absolute -top-4 -left-4 flex items-center gap-4 sm:gap-4"><div class="flex items-center gap-0 rounded-8 overflow-hidden"><div class="bg-primary-400 w-18 h-18 flex items-center justify-center"><svg width="17" height="18" viewBox="0 0 17 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-12"><path d="M8.20551 0.410156C12.6384 0.410156 16.2318 4.00354 16.2318 8.43647C16.2318 12.8694 12.6384 16.4628 8.20551 16.4628C3.77258 16.4628 0.179199 12.8694 0.179199 8.43647C0.179199 4.00354 3.77258 0.410156 8.20551 0.410156ZM8.20551 3.62068C7.99264 3.62068 7.78849 3.70525 7.63797 3.85577C7.48745 4.00629 7.40288 4.21044 7.40288 4.42331V8.43647C7.40293 8.64933 7.48752 8.85344 7.63805 9.00393L10.0459 11.4118C10.1973 11.558 10.4001 11.6389 10.6105 11.6371C10.821 11.6353 11.0223 11.5509 11.1711 11.4021C11.3199 11.2532 11.4043 11.0519 11.4061 10.8415C11.408 10.631 11.3271 10.4283 11.1809 10.2769L9.00815 8.10418V4.42331C9.00815 4.21044 8.92358 4.00629 8.77306 3.85577C8.62254 3.70525 8.41839 3.62068 8.20551 3.62068Z" fill="white"></path></svg></div> <div class="flex items-center justify-center bg-base-white pl-4 pr-6 h-18 text-10 text-base-dark font-medium">3h</div></div>  <button class="bg-danger-500 px-4 h-18 text-10 text-base-white rounded-4 font-normal"><div class="md:block hidden">UP</div> <div class="md:hidden block">U</div></button></div> <div class="z-10 absolute -top-4 -right-4 flex items-center gap-8"><svg class="h-18 w-max" width="45" height="32" viewBox="0 0 45 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.4" y="0.4" width="44.2" height="31.2" rx="2.8" fill="white" stroke="#F5F5F5" stroke-width="0.8"></rect><mask id="mask0_2108_624" maskUnits="userSpaceOnUse" x="0" y="0" width="45" height="32" style="mask-type: luminance;"><rect x="0.4" y="0.4" width="44.2" height="31.2" rx="2.8" fill="white" stroke="white" stroke-width="0.8"></rect></mask><g mask="url(#mask0_2108_624)"><path fill-rule="evenodd" clip-rule="evenodd" d="M22.4999 25.6C27.8255 25.6 32.1428 21.3019 32.1428 16C32.1428 10.6981 27.8255 6.40001 22.4999 6.40001C17.1743 6.40001 12.8571 10.6981 12.8571 16C12.8571 21.3019 17.1743 25.6 22.4999 25.6Z" fill="url(#paint0_linear_2108_624)"></path></g><defs><linearGradient id="paint0_linear_2108_624" x1="12.8571" y1="6.40001" x2="12.8571" y2="25.6" gradientUnits="userSpaceOnUse"><stop stop-color="#D81441"></stop><stop offset="1" stop-color="#BB0831"></stop></linearGradient></defs></svg></div> <img class="w-full mb-16 aspect-[130/200] object-cover rounded-8" src="https://storage.shngm.id/low/unsafe/filters:format(webp):quality(70)/thumbnail/image/d66bf342-bcfd-4a3e-8008-a8410011cc49.jpg" alt="Cerberus" style="">  <div class="flex flex-col text-center items-center h-68"><div class="mb-16 flex flex-col justify-end h-32"><h4 class="text-base-white md:text-14 text-12 leading-16 line-clamp-2">Cerberus</h4></div> <div class="flex items-center gap-4"><div class="bg-base-white/25 rounded-6 py-2 px-4 text-base-white text-10 font-semibold items-center gap-2 flex"><svg class="min-w-13 min-h-12" width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.1429 1.5C8.8389 1.5 11.0819 3.44 11.5524 6C11.0824 8.56 8.8389 10.5 6.1429 10.5C3.4469 10.5 1.2039 8.56 0.733398 6C1.2034 3.44 3.4469 1.5 6.1429 1.5ZM6.1429 9.5C7.16263 9.49978 8.15209 9.15341 8.94933 8.51758C9.74656 7.88176 10.3044 6.99414 10.5314 6C10.3035 5.00665 9.74537 4.12 8.94821 3.48501C8.15105 2.85002 7.16205 2.50426 6.1429 2.50426C5.12375 2.50426 4.13474 2.85002 3.33759 3.48501C2.54043 4.12 1.98228 5.00665 1.7544 6C1.98145 6.99414 2.53924 7.88176 3.33647 8.51758C4.13371 9.15341 5.12316 9.49978 6.1429 9.5ZM6.1429 8.25C5.54616 8.25 4.97387 8.01295 4.55191 7.59099C4.12995 7.16903 3.8929 6.59674 3.8929 6C3.8929 5.40326 4.12995 4.83097 4.55191 4.40901C4.97387 3.98705 5.54616 3.75 6.1429 3.75C6.73964 3.75 7.31193 3.98705 7.73389 4.40901C8.15585 4.83097 8.3929 5.40326 8.3929 6C8.3929 6.59674 8.15585 7.16903 7.73389 7.59099C7.31193 8.01295 6.73964 8.25 6.1429 8.25ZM6.1429 7.25C6.47442 7.25 6.79236 7.1183 7.02678 6.88388C7.2612 6.64946 7.3929 6.33152 7.3929 6C7.3929 5.66848 7.2612 5.35054 7.02678 5.11612C6.79236 4.8817 6.47442 4.75 6.1429 4.75C5.81138 4.75 5.49344 4.8817 5.25902 5.11612C5.02459 5.35054 4.8929 5.66848 4.8929 6C4.8929 6.33152 5.02459 6.64946 5.25902 6.88388C5.49344 7.1183 5.81138 7.25 6.1429 7.25Z" fill="white"></path></svg> 12.4k</div> <div class="bg-base-white/25 rounded-6 py-2 px-4 text-base-white text-10 font-semibold">CH.10</div></div></div></div></div></a></div>`;

  try {
    const manhwaList = await scraper.scrapeFromHTML(fullHTML);
    
    await scraper.saveToJSON(manhwaList, 'manhwa-full-test.json');
    
    const summary = scraper.generateSummary(manhwaList);
    await scraper.saveToJSON(summary, 'manhwa-full-summary.json');
    
    console.log(`\n✅ Berhasil scrape ${manhwaList.length} manhwa!\n`);
    
    manhwaList.forEach((manhwa, idx) => {
      console.log(`${idx + 1}. ${manhwa.title}`);
      console.log(`   Views: ${manhwa.views} | Chapter: ${manhwa.latestChapter}`);
    });

    console.log('\n' + '='.repeat(60));
    console.log('✅ Selesai! Data tersimpan di folder data/');
    console.log('='.repeat(60));

  } catch (error) {
    console.error('\n❌ Error:', error.message);
  }
}

main().catch(console.error);
